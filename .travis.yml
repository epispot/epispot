language: python
python: "3.7"

install:
  - pip install -r requirements.txt

script:
  - cd scripts 
  - python docs.py
  - cd ..
  - make -C docs/ html
  - touch docs/_build/html/.nojekyll
  - git config user.name github-actions
  - git config user.email github-actions@github.com
  - git add .
  - git commit -m 'Update docs'
  - git push origin docs

deploy:
  - provider: pages:git
    verbose: true
    token: $GITHUB_TOKEN
    edge: true
    local_dir: ./docs/build/html/
    keep_history: true